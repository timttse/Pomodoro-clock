<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  	<link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>
  	<!-- <link rel="stylesheet" type="text/css" href="styles.css"> -->
  	<script src="clock.js"></script>
  	<!-- <script src="script.js"></script> -->
	<title>Pomodoro Clock</title>

	<script>

		function startTimer(timer1,timer2){
			timer1.startTimer($(".countdown"),100);
			// c.startTimer();

			var t=setInterval(function(){
				// console.log(timer1.getMilliseconds());
				if(timer1.getMilliseconds()<=0){
					clearInterval(t);
					timer1.reset();
					$(".countdown").text(timer2.timeString);
					startTimer(timer2,timer1);
				}
			},1000);
		}

		$(document).ready(function(){
			
			// get session time
			var sessionInMil=$(".time").val()*60*1000
			var c=new Clock(sessionInMil);

			var breakInMil=$(".break").val()*60*1000
			var b=new Clock(breakInMil);

			$(".countdown").text(c.timeString);
			var timer=0;

			// // session input value change
			// $(".time").change(function(){
			// 	sessionInMil=$(this).val()*60*1000
			// 	c.setMilliseconds(sessionInMil);
			// 	$(".countdown").text(c.toTimeString());
			// 	timer=0;
			// });

			// //break input value cahnge
			// $(".break").change(function(){
			// 	breakInMil=$(this).val()*60*1000
			// 	b.setMilliseconds(breakInMil);
			// 	$(".countdown").text(b.toTimeString());
			// 	timer=0;
			// });

			// start button
			$(".startTimer").click(function(){
				startTimer(c,b);
				
				// if(c.milliseconds>0){
				// 	c.startTimer($(".countdown"),100);
				// 	// c.startTimer();

				// 	var t=setInterval(function(){
				// 		console.log(c.getMilliseconds());
				// 		if(c.getMilliseconds()<=0){
				// 			clearInterval(t);
				// 			$(".countdown").text(b.timeString);
				// 			b.startTimer($(".countdown"));
				// 		}
				// 	},1000);


				// } else if (b.milliseconds>0){
				// 	// b.startTimer();
				// }
			});


			// stop/pause button
			$(".stopTimer").click(function(){
				if(c.isRunning()){
					c.stopTimer();
				}
				if(b.isRunning()){
					b.stopTimer();
				}
				// clearInterval(timer);
				// timer=0;
			});

	    });

	</script>

</head>
<body>
	<div class="container-fluid text-center">
		<div class="row">
		<!-- <span class="time">1</span><span> min</span>-->
		<div class="col-sm-6"><label>Break Length: </label><input class="break" type="text" value="2" /></div>
		<div class="col-sm-6"><label>Session Length: </label><input class="time" type="text" value="1" /></div>
		</div>
		<div class="countdown"></div>
		<button class="stopTimer">Stop</button>
		<button class="startTimer">Start</button>
	</div>
</body>
</html>